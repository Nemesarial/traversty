/**************************************************************
  * Traversty: DOM Traversal Utility (c) Rod Vagg (@rvagg) 2012
  * https://github.com/rvagg/traversty
  * License: MIT
  */!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(e,t):this[e]=t()}("traversty",function(){var e=this,t=e.traversty,n=window.document,r=n.documentElement,i=Object.prototype.toString,s=Array.prototype.slice,o=function(e,t,n,r,i){while(r<t.length)if(e[i=t[r++]+n])return i}(r,["msM","webkitM","mozM","oM","m"],"atchesSelector",0),u=function(e){return i.call(e)==="[object Number]"},a=function(e){return i.call(e)==="[object String]"},f=function(e){return i.call(e)==="[object Function]"},l=function(e){return e===void 0},c=function(e){return e&&e.nodeType===1},h=function(e,t){return l(e)&&!u(t)?0:u(e)?e:u(t)?t:null},p=function(e){return a(e)?e:"*"},d=function(e,t){return s.call(t.querySelectorAll(e),0)},v=function(e,t){return e==="*"||t[o](e)},m=d,g=v,y=function(e,t){return function(n,r){if(/,/.test(n)){var i=[],s=-1,o=r.getElementsByTagName("*");while(++s<o.length)c(o[s])&&t(n,o[s])&&i.push(o[s]);return i}return e(n,r)}},b="compareDocumentPosition"in r?function(e,t){return(t.compareDocumentPosition(e)&16)==16}:"contains"in r?function(e,t){return t=t.nodeType===9||t==window?r:t,t!==e&&t.contains(e)}:function(e,t){while(e=e.parentNode)if(e===t)return 1;return 0},w=function(e){var t=[],n=-1,r,i;while(++n<e.length){r=-1,i=!1;while(++r<t.length)if(t[r]===e[n]){i=!0;break}i||t.push(e[n])}return t},E=function(e,t){var n=[],r,i=0,s,o=e.length,u;while(i<o){s=0,u=(r=t(e[i],i++)).length;while(s<u)n.push(r[s++])}return n},S=function(e,t,n,r,i){return r=h(n,r),n=p(n),E(e,function(e,s){var o=r||0,u=[];i||(e=e[t]);while(e&&(r===null||o>=0))c(e)&&(!i||i===!0||i(e,s))&&g(n,e)&&(r===null||o--===0)&&(r===null&&t!=="nextSibling"?u=[e].concat(u):u.push(e)),e=e[t];return u})},x=function(e,t,n){return t<0&&(t=e+t),t<0||t>=e?null:!t&&t!==0?n:t},T=function(e,t){var n=[],r=0,i=e.length;for(;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},N=function(e){var t;return c(e)?function(t){return t===e}:(t=typeof e)=="function"?function(t,n){return e.call(t,n)}:t=="string"&&e.length?function(t){return g(e,t)}:function(){return!1}},C=function(e){return function(){return!e.apply(this,arguments)}},k=function(){function r(e){this.length=0;if(e){e=w(!e.nodeType&&!l(e.length)?e:[e]);var t=this.length=e.length;while(t--)this[t]=e[t]}}function i(e){return new r(a(e)?m(e,n):e)}return r.prototype={down:function(e,t){return t=h(e,t),e=p(e),k(E(this,function(n){var r=m(e,n);return t===null?r:[r[t]]||[]}))},up:function(e,t){return k(S(this,"parentNode",e,t))},parents:function(){return r.prototype.up.apply(this,arguments.length?arguments:["*"])},previous:function(e,t){return k(S(this,"previousSibling",e,t))},next:function(e,t){return k(S(this,"nextSibling",e,t))},siblings:function(e,t){var n=this,r=s.call(this,0),i=0,o=r.length;for(;i<o;i++){r[i]=r[i].parentNode.firstChild;while(!c(r[i]))r[i]=r[i].nextSibling}return l(e)&&(e="*"),k(S(r,"nextSibling",e||"*",t,function(e,t){return e!==n[t]}))},children:function(e,t){return k(S(r.prototype.down.call(this),"nextSibling",e||"*",t,!0))},first:function(){return r.prototype.eq.call(this,0)},last:function(){return r.prototype.eq.call(this,-1)},eq:function(e){return k((e=x(this.length,e,0))===null?[]:this[e])},slice:function(e,t){var n=t,r=this.length,i=[];e=x(r,Math.max(-this.length,e),0),n=x(t<0?r:r+1,t,r),t=n===null||n>r?t<0?0:r:n;while(e!==null&&e<t)i.push(this[e++]);return k(i)},filter:function(e){return k(T(this,N(e)))},not:function(e){return k(T(this,C(N(e))))},is:function(e){var t=0,n=this.length,r=N(e);for(;t<n;t++)if(r(this[t],t))return!0;return!1},has:function(e){return k(T(this,c(e)?function(t){return b(e,t)}:typeof e=="string"&&e.length?function(t){return m(e,t).length}:function(){return!1}))}},i.setSelectorEngine=function(e){var t,r,i,s,o,u=n.createElement("p"),l=e.select||e.sel||e;u.innerHTML="<a/><i/><b/>",i=u.firstChild;try{s=f(e.matching)?function(t,n){return e.matching([n],t).length>0}:f(e.is)?function(t,n){return e.is(n,t)}:f(e.matchesSelector)?function(t,n){return e.matchesSelector(n,t)}:f(e.match)?function(t,n){return e.match(n,t)}:null,s||(t=e("a",u),s=f(t.matching)?function(t,n){return e(n).matching(t).length>0}:f(t.is)?function(t,n){return e(n).is(t)}:f(t.matchesSelector)?function(t,n){return e(n).matchesSelector(t)}:f(t.match)?function(t,n){return e(n).match(t)}:null);if(!s)throw"Traversty: couldn't find selector engine's `matchesSelector`";if(s("x,y",u)||!s("a,p",u))throw"Traversty: couldn't make selector engine's `matchesSelector` work";if((r=l("b,a",u)).length!==2)throw"Traversty: don't know how to use this selector engine";o=r[0]===i?l:y(l,s);if((r=o("b,a",u)).length!==2||r[0]!==i)throw"Traversty: couldn't make selector engine work";g=s,m=o}catch(c){throw a(c)?c:"Traversty: error while figuring out how the selector engine works: "+(c.message||c)}finally{u=null}},i.noConflict=function(){return e.traversty=t,this},i}();return k});